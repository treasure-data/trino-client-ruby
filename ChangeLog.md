trino-client-ruby
====
## 2.2.1
- fix: Retry GET against 502, 503 responses ([#129](https://github.com/treasure-data/trino-client-ruby/issues/129)) [[80f342d](https://github.com/treasure-data/trino-client-ruby/commit/80f342d)]
- Update CODEOWNERS ([#127](https://github.com/treasure-data/trino-client-ruby/issues/127)) [[bad4b34](https://github.com/treasure-data/trino-client-ruby/commit/bad4b34)]
- Update rspec requirement from ~> 3.12.0 to ~> 3.13.0 ([#124](https://github.com/treasure-data/trino-client-ruby/issues/124)) [[6716716](https://github.com/treasure-data/trino-client-ruby/commit/6716716)]
- Bump release-drafter/release-drafter from 5 to 6 ([#125](https://github.com/treasure-data/trino-client-ruby/issues/125)) [[0c808c2](https://github.com/treasure-data/trino-client-ruby/commit/0c808c2)]
- Bump github/codeql-action from 2 to 3 ([#123](https://github.com/treasure-data/trino-client-ruby/issues/123)) [[c9d9356](https://github.com/treasure-data/trino-client-ruby/commit/c9d9356)]

## 2.2.0
- Add transform_row and scalar_parser documentation and make them easier to use ([#118](https://github.com/treasure-data/trino-client-ruby/issues/118)) [[41ffca7](https://github.com/treasure-data/trino-client-ruby/commit/41ffca7)]

## 2.1.0
- Add utility for transforming Trino ROW type columns into Ruby hashes ([#117](https://github.com/treasure-data/trino-client-ruby/issues/117)) [[e14251c](https://github.com/treasure-data/trino-client-ruby/commit/e14251c)]
- Bump actions/checkout from 3 to 4 ([#116](https://github.com/treasure-data/trino-client-ruby/issues/116)) [[ebd9d9e](https://github.com/treasure-data/trino-client-ruby/commit/ebd9d9e)]

## 2.0.1
- Reduce published gem size ([#113](https://github.com/treasure-data/trino-client-ruby/issues/113)) [[4e03819](https://github.com/treasure-data/trino-client-ruby/commit/4e03819)]
- Update standard requirement from ~> 1.24.3 to ~> 1.30.1 ([#112](https://github.com/treasure-data/trino-client-ruby/issues/112)) [[b9f9c0c](https://github.com/treasure-data/trino-client-ruby/commit/b9f9c0c)]

## 2.0.0
- Bump actions/checkout from 2 to 3 ([#99](https://github.com/treasure-data/trino-client-ruby/issues/99)) [[3022dc1](https://github.com/treasure-data/trino-client-ruby/commit/3022dc1)]
- linter: Enable linter on lib  ([#98](https://github.com/treasure-data/trino-client-ruby/issues/98)) [[1c043cd](https://github.com/treasure-data/trino-client-ruby/commit/1c043cd)]
- ci: fix typo ([#97](https://github.com/treasure-data/trino-client-ruby/issues/97)) [[69d966d](https://github.com/treasure-data/trino-client-ruby/commit/69d966d)]
- Faraday 2.x and 1.x cross support ([#94](https://github.com/treasure-data/trino-client-ruby/issues/94)) [[401639e](https://github.com/treasure-data/trino-client-ruby/commit/401639e)]
- "push" event on pull requests are redundant ([#95](https://github.com/treasure-data/trino-client-ruby/issues/95)) [[f935407](https://github.com/treasure-data/trino-client-ruby/commit/f935407)]
- Fix for Ruby 3.2.x ([#92](https://github.com/treasure-data/trino-client-ruby/issues/92)) [[3e8fad5](https://github.com/treasure-data/trino-client-ruby/commit/3e8fad5)]
- Update CODEOWNERS [[4d8709a](https://github.com/treasure-data/trino-client-ruby/commit/4d8709a)]
- Merge pull request [#90](https://github.com/treasure-data/trino-client-ruby/issues/90) from treasure-data/release-drafter [[390a745](https://github.com/treasure-data/trino-client-ruby/commit/390a745)]
- Merge pull request [#80](https://github.com/treasure-data/trino-client-ruby/issues/80) from treasure-data/dependabot/bundler/rspec-tw-3.12.0 [[b525d85](https://github.com/treasure-data/trino-client-ruby/commit/b525d85)]
- Migrate legacy "should" to "expect" [[9c22bb0](https://github.com/treasure-data/trino-client-ruby/commit/9c22bb0)]
- Bump rake so it works with rspec 3.x [[7354526](https://github.com/treasure-data/trino-client-ruby/commit/7354526)]
- Update rspec requirement from ~> 2.13.0 to ~> 3.12.0 [[0c82814](https://github.com/treasure-data/trino-client-ruby/commit/0c82814)]
- Merge pull request [#91](https://github.com/treasure-data/trino-client-ruby/issues/91) from treasure-data/dependabot/bundler/standard-tw-1.24.3 [[ec7a559](https://github.com/treasure-data/trino-client-ruby/commit/ec7a559)]
- Remove the deprecated "test_files" to make the gem package smaller [[7e03774](https://github.com/treasure-data/trino-client-ruby/commit/7e03774)]
- Use parentheses with complex conditions [[c6351b7](https://github.com/treasure-data/trino-client-ruby/commit/c6351b7)]
- Remove redundant escape [[b52d244](https://github.com/treasure-data/trino-client-ruby/commit/b52d244)]
- Update standard requirement from ~> 1.12.1 to ~> 1.24.3 [[0723dc7](https://github.com/treasure-data/trino-client-ruby/commit/0723dc7)]
- Introduce release-drafter github action [[7cf538b](https://github.com/treasure-data/trino-client-ruby/commit/7cf538b)]
- Run unit tests in github actions with ruby 3 ([#89](https://github.com/treasure-data/trino-client-ruby/issues/89)) [[58e899d](https://github.com/treasure-data/trino-client-ruby/commit/58e899d)]
- Upgrade minimum ruby version to 2.7 ([#86](https://github.com/treasure-data/trino-client-ruby/issues/86)) [[07921fd](https://github.com/treasure-data/trino-client-ruby/commit/07921fd)]
- Bump ruby/setup-ruby from 1.61.0 to 1.133.2 ([#85](https://github.com/treasure-data/trino-client-ruby/issues/85)) [[79e722c](https://github.com/treasure-data/trino-client-ruby/commit/79e722c)]
- Update dependabot.yaml [[96cf01d](https://github.com/treasure-data/trino-client-ruby/commit/96cf01d)]
- Update addressable requirement from ~> 2.4.0 to ~> 2.8.1 ([#82](https://github.com/treasure-data/trino-client-ruby/issues/82)) [[24b0c9e](https://github.com/treasure-data/trino-client-ruby/commit/24b0c9e)]
- Update simplecov requirement from ~> 0.10.0 to ~> 0.22.0 ([#83](https://github.com/treasure-data/trino-client-ruby/issues/83)) [[8e46420](https://github.com/treasure-data/trino-client-ruby/commit/8e46420)]
- Merge pull request [#79](https://github.com/treasure-data/trino-client-ruby/issues/79) from treasure-data/dependabot/bundler/standard-tw-1.12.1 [[d82433f](https://github.com/treasure-data/trino-client-ruby/commit/d82433f)]
- Reformat [[8fb2672](https://github.com/treasure-data/trino-client-ruby/commit/8fb2672)]
- Update standard requirement from ~> 1.0.0 to ~> 1.12.1 [[bbb900f](https://github.com/treasure-data/trino-client-ruby/commit/bbb900f)]
- Create dependabot.yaml [[d1b619a](https://github.com/treasure-data/trino-client-ruby/commit/d1b619a)]
- Merge pull request [#78](https://github.com/treasure-data/trino-client-ruby/issues/78) from treasure-data/standardrb [[bed70c9](https://github.com/treasure-data/trino-client-ruby/commit/bed70c9)]
- Reformat Rakefile and etc [[6e08989](https://github.com/treasure-data/trino-client-ruby/commit/6e08989)]
- Introduce standard [[009173e](https://github.com/treasure-data/trino-client-ruby/commit/009173e)]
- Merge pull request [#76](https://github.com/treasure-data/trino-client-ruby/issues/76) from treasure-data/SECU-1152 [[5c9b488](https://github.com/treasure-data/trino-client-ruby/commit/5c9b488)]
- Remove ruby 2.5 from testing targets [[cdaa0e4](https://github.com/treasure-data/trino-client-ruby/commit/cdaa0e4)]
- Create codeql-analysis.yml [[116a17f](https://github.com/treasure-data/trino-client-ruby/commit/116a17f)]
- Merge pull request [#77](https://github.com/treasure-data/trino-client-ruby/issues/77) from treasure-data/retry-interval [[cfd99f6](https://github.com/treasure-data/trino-client-ruby/commit/cfd99f6)]
- Update retryable errors [[e8878f6](https://github.com/treasure-data/trino-client-ruby/commit/e8878f6)]
- Minor change for retry logic for testing [[190fd92](https://github.com/treasure-data/trino-client-ruby/commit/190fd92)]

## 1.0.2
- Merge pull request [#75](https://github.com/treasure-data/trino-client-ruby/issues/75) from evgeniy-b/1-0-1-fixes [[4cdd21f](https://github.com/treasure-data/trino-client-ruby/commit/4cdd21f)]
- Faraday basic auth deprecation fix [[5c20266](https://github.com/treasure-data/trino-client-ruby/commit/5c20266)]
- Gem::Specification#has_rdoc deprecation fix [[baaec53](https://github.com/treasure-data/trino-client-ruby/commit/baaec53)]
- Convert model_version to string to use gsub() [[7118ad5](https://github.com/treasure-data/trino-client-ruby/commit/7118ad5)]
- Fix model version check (operator priority) [[31c22f3](https://github.com/treasure-data/trino-client-ruby/commit/31c22f3)]

## 1.0.1
- Merge pull request [#73](https://github.com/treasure-data/trino-client-ruby/issues/73) from pedrombl/update-faraday [[2a6482c](https://github.com/treasure-data/trino-client-ruby/commit/2a6482c)]
- Merge pull request [#74](https://github.com/treasure-data/trino-client-ruby/issues/74) from takezoe/alias-gem [[6829f5b](https://github.com/treasure-data/trino-client-ruby/commit/6829f5b)]
- Add a script to publish two gems at once [[2eea152](https://github.com/treasure-data/trino-client-ruby/commit/2eea152)]
- Add alias gem 'trino-client-ruby' [[597d332](https://github.com/treasure-data/trino-client-ruby/commit/597d332)]
- Bump faraday version from 0.12 to 1.0 [[cd7864f](https://github.com/treasure-data/trino-client-ruby/commit/cd7864f)]
- Merge pull request [#72](https://github.com/treasure-data/trino-client-ruby/issues/72) from miniway/trino_add_error_type [[2aa365a](https://github.com/treasure-data/trino-client-ruby/commit/2aa365a)]
- Add error_type and error_location at TrinoQueryError [[e3598c1](https://github.com/treasure-data/trino-client-ruby/commit/e3598c1)]

## 1.0.0
- Migration to Trino ([#70](https://github.com/treasure-data/trino-client-ruby/issues/70)) [[933db57](https://github.com/treasure-data/trino-client-ruby/commit/933db57)]
- Setup GitHub Actions ([#71](https://github.com/treasure-data/trino-client-ruby/issues/71)) [[697d20f](https://github.com/treasure-data/trino-client-ruby/commit/697d20f)]

## 0.6.5
- Add gzip option ([#68](https://github.com/treasure-data/presto-client-ruby/issues/68)) [[1f43629](https://github.com/treasure-data/presto-client-ruby/commit/1f43629)]
- Bump tiny-presto to 0.0.7 to use docker image in GitHub Container Registry ([#69](https://github.com/treasure-data/presto-client-ruby/issues/69)) [[57b5045](https://github.com/treasure-data/presto-client-ruby/commit/57b5045)]

## 0.6.4
- Merge pull request [#67](https://github.com/treasure-data/presto-client-ruby/issues/67) from takezoe/update-readme-follow-redirect-option [[6da5025](https://github.com/treasure-data/presto-client-ruby/commit/6da5025)]
- Update README.md to describe follow_redirect option [[83f8a05](https://github.com/treasure-data/presto-client-ruby/commit/83f8a05)]
- Merge pull request [#66](https://github.com/treasure-data/presto-client-ruby/issues/66) from takezoe/follow-redirect-option [[9f1b297](https://github.com/treasure-data/presto-client-ruby/commit/9f1b297)]
- Update lib/presto/client/faraday_client.rb [[64c0b81](https://github.com/treasure-data/presto-client-ruby/commit/64c0b81)]
- Add follow_redirect option [[a103660](https://github.com/treasure-data/presto-client-ruby/commit/a103660)]
- Create CODEOWNERS [[c8c3251](https://github.com/treasure-data/presto-client-ruby/commit/c8c3251)]

## 0.6.3
- Merge pull request [#56](https://github.com/treasure-data/presto-client-ruby/issues/56) from miniway/more_recent_statementclient [[423ff42](https://github.com/treasure-data/presto-client-ruby/commit/423ff42)]
- Make more similar to recent java StatementClient [[94f5193](https://github.com/treasure-data/presto-client-ruby/commit/94f5193)]
- Test with presto docker container ([#62](https://github.com/treasure-data/presto-client-ruby/issues/62)) [[fe8af11](https://github.com/treasure-data/presto-client-ruby/commit/fe8af11)]
- Add pull request template [[7b286cc](https://github.com/treasure-data/presto-client-ruby/commit/7b286cc)]

## 0.6.2
- Release 0.6.2 [[68f5b27](https://github.com/treasure-data/presto-client-ruby/commit/68f5b27)]
- Merge pull request [#61](https://github.com/treasure-data/presto-client-ruby/issues/61) from treasure-data/implement_query_id [[6f3f236](https://github.com/treasure-data/presto-client-ruby/commit/6f3f236)]
- Merge pull request [#60](https://github.com/treasure-data/presto-client-ruby/issues/60) from treasure-data/fix_test [[01fa867](https://github.com/treasure-data/presto-client-ruby/commit/01fa867)]
- Merge pull request [#59](https://github.com/treasure-data/presto-client-ruby/issues/59) from treasure-data/update_readme [[50b2e2a](https://github.com/treasure-data/presto-client-ruby/commit/50b2e2a)]
- Update test target ruby versions [[2b65462](https://github.com/treasure-data/presto-client-ruby/commit/2b65462)]
- Update description of model_version [[750232e](https://github.com/treasure-data/presto-client-ruby/commit/750232e)]
- Remove old ruby versions [[28b1abb](https://github.com/treasure-data/presto-client-ruby/commit/28b1abb)]
- Enable fail_on_error [[9c1112a](https://github.com/treasure-data/presto-client-ruby/commit/9c1112a)]
- Fix tests which is only effective when presto version is less than 313 [[695966e](https://github.com/treasure-data/presto-client-ruby/commit/695966e)]
- Implement `StatementClient#query_id` [[2b692ca](https://github.com/treasure-data/presto-client-ruby/commit/2b692ca)]
- url encode properties ([#57](https://github.com/treasure-data/presto-client-ruby/issues/57)) [[8450627](https://github.com/treasure-data/presto-client-ruby/commit/8450627)]


## 0.6.1
* Fix WriterTarget 316 model class name

## 0.6.0
* Support presto 316 model class

## 0.5.14
* Added `Query#current_results_headers` that returns HTTP response headers

## 0.5.13
* Added `query_timeout` and `plan_timeout` options with default disabled
* Changed timer to use CLOCK_MONOTONIC to avoid unexpected behavior when
  system clock is updated

## 0.5.12
* Upgrade to Presto 0.205 model

## 0.5.11
* Support multiple session properties
* Check invalid JSON data response

## 0.5.10
* Added client_info, client_tags, and http_headers options.

## version 0.5.9
* Added error_name field at PrestoQueryError

## 0.5.8
* Added `Client#kill(query_id)` method.
* Added additional checking of internal exceptions so that client doesn't
  silently return in case when Presto query is killed and Presto returns a
  valid `200 OK` response with `result_uri: null`.
* Fixed `undefined local variable 'body'` error that was possibly happening
  when Presto returned an unexpected data structure.

## 0.5.7
* Support a password option with HTTP basic auth
* Changed retry timeout from hard coded 2h to configurable default 2min
* Fix too deep nested json failure

## 0.5.6:
* Added missing inner class models for version 0.178

## 0.5.5:
* Added support for model version 0.178

## 0.5.4:
* Support "Content-Type: application/x-msgpack" for more efficient parsing of
  HTTP response body.
* Added "enable_x_msgpack: true" option to send Accept header with
  application/x-msgpack.

## 0.5.3:
* Added support for model version 0.173.
* Changed the default latest model version to 0.173.
* Fixed compatibility with the new major version of Farady
* Require Faraday 0.12 or later

## 0.5.2:
* Relax dependent version of Faraday to be able to use all 0.x versions.
* Fix build script that was broken due to new major version of rake.

## 0.5.1:
* Assume ConnectorId as a primitive type to be able to decode "connectorId"
  fields.

## 0.5.0:
* Support multiple model versions
* Added support for model version 0.153.
* Changed the default latest model version to 0.513.

## 0.4.17:
* Added support for :ssl option.

## 0.4.16:
* Upgraded Presto model version to 0.151

## 0.4.15:
* decode method of model classes validate Hash type

## 0.4.14:
* Added support for resuming fetching query results by using new `Query.resume(next_uri, options)` method (@tetrakai++)

## 0.4.13:
* Added support for :http_proxy option to use a HTTP proxy server
* Added support for hashed Client response using `run_with_names` (thanks to MoovWeb for allowing me to contribute)
* Upgraded Presto model version to 0.134

## 0.4.5:
* Upgraded Presto model version to 0.99

## 0.4.3:
* Updated gem dependency to accept faraday ~> 0.9.x as well as ~> 0.8.8

## 0.4.2:
* Added support for :properties option to set session properties introduced
since Presto 0.78

## 0.4.1:
 Added EquiJoinClause model class
* Added StageId#query_id and #id methods
* Added TaskId#query_id, #stage_id and #id methods

## 0.4.0:
* Added Query#current_results, #advance and #query_info for advanced users
* Generate model classes from Presto source code to include complete classes

## 0.3.3:
* Added :time_zone and :language options added by Presto 0.66

## 0.3.2:
* Fixed a problem that client skips the last chunk if result is large

## 0.3.1:
* Added http_debug option
* Disabled HTTP debug logging by default

## 0.3.0:
* Added http_timeout option
* Added http_open_timeout option
* Changed Query.start API to start(query, options) to http options

## 0.2.0:
* Added Query#cancel
* Added Query#close
* Added Client#run
* Changed required_ruby_version from 1.9.3 to 1.9.1

## 0.1.0:
* First release
